<!DOCTYPE html><html lang="ru"><head><meta charset="utf-8" /><meta name="author" content="Иван Пономарёв, КУРС/МФТИ" /><title>Core Java: Курс лекций. Лекция 6</title><meta content="yes" name="apple-mobile-web-app-capable" /><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style" /><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport" /><link href="reveal.js-3.7.0/css/reveal.css" rel="stylesheet" /><link rel="stylesheet" href="white_course.css" id="theme" /><!--This CSS is generated by the Asciidoctor-Reveal.js converter to further integrate AsciiDoc's existing semantic with Reveal.js--><style type="text/css">.reveal div.right {
  float: right;
}

/* callouts */
.conum[data-value] {display:inline-block;color:#fff!important;background-color:rgba(50,150,50,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}</style><link rel="stylesheet" href="./font-awesome-4.7.0/css/font-awesome.css" /><style>/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}</style><link href="reveal.js-3.7.0/lib/css/zenburn.css" rel="stylesheet" /><script>var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? "reveal.js-3.7.0/css/print/pdf.css" : "reveal.js-3.7.0/css/print/paper.css";
document.getElementsByTagName( 'head' )[0].appendChild( link );</script><!--[if lt IE 9]><script src="reveal.js-3.7.0/lib/js/html5shiv.js"></script><![endif]--></head><body><div class="reveal"><div class="slides"><section class="title" data-state="title"><h1>Core Java</h1><h2>Курс лекций. Лекция 6</h2><div class="preamble"><div class="paragraph"><p><a href="mailto:ponomarev@corchestra.ru">ponomarev@corchestra.ru</a></p></div>
<div class="paragraph"><p><span class="icon"><i class="fa fa-twitter fa-lg"></i></span> @inponomarev</p></div></div><p class="author"><small>Иван Пономарёв, КУРС/МФТИ</small></p></section>
<section id="_до_появления_дженериков"><h2>До появления дженериков</h2><pre class="CodeRay listingblock"><code class="java language-java">Manager ceo = ...;
Manager cto = ...;
Employee cleaner = ...;
<span class="predefined-type">List</span> managers = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>();
managers.add(ceo);
managers.add(cto);

<span class="comment">//bug!!</span>
managers.add(cleaner);

<span class="comment">//typecast with runtime exception -- too late!</span>
Manager m = (Manager) managers.get(<span class="integer">2</span>);</code></pre></section>
<section id="_runtime_vs_compile_time_errors"><div class="imageblock" style=""><img src="images/rtvscompiletime.png" alt="rtvscompiletime" /></div></section>
<section id="_после_появления_дженериков"><h2>После появления дженериков</h2><pre class="CodeRay listingblock"><code class="java language-java">Manager ceo = ...;
Manager cto = ...;
Employee cleaner = ...;
<span class="predefined-type">List</span>&lt;Manager&gt; managers = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();

managers.add(ceo);
managers.add(cto);
<span class="comment">// не скомпилируется!</span>
<span class="comment">// managers.add(cleaner);</span>

<span class="comment">// приводить тип не нужно!</span>
Manager m = managers.get(<span class="integer">1</span>);</code></pre></section>
<section id="_определяем_собственный_параметризованный_класс"><h2>Определяем собственный параметризованный класс</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Pair</span>&lt;T&gt; {
  <span class="directive">private</span> T first;
  <span class="directive">private</span> T second;
  <span class="directive">public</span> Pair() { first = <span class="predefined-constant">null</span>; second = <span class="predefined-constant">null</span>; }
  <span class="directive">public</span> Pair(T first, T second) {
    <span class="local-variable">this</span>.first = first;
    <span class="local-variable">this</span>.second = second;
  }
  <span class="directive">public</span> T getFirst() { <span class="keyword">return</span> first; }
  <span class="directive">public</span> T getSecond() { <span class="keyword">return</span> second; }
  <span class="directive">public</span> <span class="type">void</span> setFirst(T newValue) { first = newValue; }
  <span class="directive">public</span> <span class="type">void</span> setSecond(T newValue) { second = newValue; }
}</code></pre></section>
<section id="_определение_и_использование"><h2>Определение и использование</h2><pre class="CodeRay listingblock"><code class="java language-java">Pair&lt;<span class="predefined-type">String</span>&gt; pair = ...

<span class="comment">//ЧТО ЭКВИВАЛЕНТНО ЗАМЕНЕ T НА String</span>
Pair(<span class="predefined-type">String</span>, <span class="predefined-type">String</span>)
<span class="predefined-type">String</span> getFirst()
<span class="predefined-type">String</span> getSecond()
<span class="type">void</span> setFirst(<span class="predefined-type">String</span>)
<span class="type">void</span> setSecond(<span class="predefined-type">String</span>)</code></pre></section>
<section id="_generic_methods"><h2>Generic methods</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="directive">public</span> &lt;T&gt; T getRandomItem(T... items) {
  <span class="keyword">return</span> items[ThreadLocalRandom.current().nextInt(items.length)];
}

<span class="predefined-type">String</span> s = getRandomItem(<span class="string"><span class="delimiter">&quot;</span><span class="content">A</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">B</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">C</span><span class="delimiter">&quot;</span></span>);
Manager m = getRandomItem(ceo, cto, cfo);</code></pre></section>
<section id="_другой_пример"><h2>Другой пример</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="directive">public</span> &lt;T&gt; T getRandomItem(<span class="predefined-type">List</span>&lt;T&gt; items) {
  T result =
    items.get(
      ThreadLocalRandom.current().nextInt(items.size()));
  <span class="keyword">return</span> result;
}</code></pre></section>
<section id="_промежуточные_выводы"><h2>Промежуточные выводы</h2><div class="ulist"><ul><li><p>Использование параметризованных классов&#8201;&#8212;&#8201;простое (просто укажите параметры, <code>List&lt;Manager&gt;</code>)</p></li><li><p>Использование параметризованных методов&#8201;&#8212;&#8201;ещё проще: type inference: <code>Manager m = getRandomItem(&#8230;&#8203;);</code></p></li><li><p>Написание собственных параметризованных классов и методов&#8201;&#8212;&#8201;задачка более сложная.</p></li></ul></div></section>
<section id="_bounded_types"><h2>Bounded types</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="directive">public</span> &lt;T <span class="directive">extends</span> Person&gt; <span class="predefined-type">String</span> getRandomPersonName(<span class="predefined-type">List</span>&lt;T&gt; items) {
  Person result = <span class="comment">//можно написать и T result =</span>
    items.get(ThreadLocalRandom.current().nextInt(items.size()));

  <span class="keyword">return</span> result.getName();
}</code></pre></section>
<section id="_intersection_types"><h2>Intersection types</h2><div class="imageblock" style=""><img src="images/intersections.png" alt="intersections" /></div>
<pre class="CodeRay listingblock"><code class="java language-java"><span class="comment">//через амперсанд сколько угодно интерфейсов,</span>
<span class="comment">//но не более одного класса</span>
<span class="directive">public</span> &lt;T <span class="directive">extends</span> Person &amp; Payable&gt;
  <span class="predefined-type">String</span> getRandomNameAndPayment(<span class="predefined-type">List</span>&lt;T&gt; items) {
  T result =
    items.get(
        ThreadLocalRandom.current().nextInt(items.size()));
    <span class="keyword">return</span> result.getName() <span class="comment">//из Person!</span>
         + result.getPayment(); <span class="comment">//из Payable!</span>
}</code></pre></section>
<section id="_реализация_дженериков"><h2>Реализация дженериков</h2><div class="ulist"><ul><li><p>Появились в Java 5</p></li><li><p>Стояла задача обратной совместимости</p></li><li><p>Generics&#8201;&#8212;&#8201;возможность языка, а не платформы</p></li><li><p>Type Erasure, будь он неладен!</p></li></ul></div></section>
<section id="_сырые_типы"><h2>Сырые типы</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:45%" /><col style="width:55%" /></colgroup><tbody><tr><td class="tableblock halign-center valign-top"><div><div class="paragraph"><p><strong>Generic Type (source)</strong></p></div></div></td><td class="tableblock halign-center valign-top"><div><div class="paragraph"><p><strong>Raw Type (compiled)</strong></p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">Pair</span>&lt;T&gt; {
  <span class="directive">private</span> T first;
  <span class="directive">private</span> T second;
  Pair(T first,
       T second)
   {<span class="local-variable">this</span>.first = first;
    <span class="local-variable">this</span>.second = second;}
  T getFirst()
   {<span class="keyword">return</span> first; }
  T getSecond()
   {<span class="keyword">return</span> second; }
  <span class="type">void</span> setFirst(T newValue)
   {first = newValue;}
  <span class="type">void</span> setSecond(T newValue)
   {second = newValue;}
}</code></pre></div></td><td class="tableblock halign-left valign-top"><div><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">Pair</span> {
  <span class="directive">private</span> <span class="predefined-type">Object</span> first;
  <span class="directive">private</span> <span class="predefined-type">Object</span> second;
  Pair(<span class="predefined-type">Object</span> first,
       <span class="predefined-type">Object</span> second)
   {<span class="local-variable">this</span>.first = first;
    <span class="local-variable">this</span>.second = second;}
  <span class="predefined-type">Object</span> getFirst()
   {<span class="keyword">return</span> first; }
  <span class="predefined-type">Object</span> getSecond()
   {<span class="keyword">return</span> second; }
  <span class="type">void</span> setFirst(<span class="predefined-type">Object</span> newValue)
   {first = newValue;}
  <span class="type">void</span> setSecond(<span class="predefined-type">Object</span> newValue)
   {second = newValue;}
}</code></pre></div></td></tr></table></section>
<section id="_ограниченные_типы_вместо_object"><h2>Ограниченные типы вместо Object</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:45%" /><col style="width:55%" /></colgroup><tbody><tr><td class="tableblock halign-center valign-top"><div><div class="paragraph"><p><strong>Generic Type (source)</strong></p></div></div></td><td class="tableblock halign-center valign-top"><div><div class="paragraph"><p><strong>Raw Type (compiled)</strong></p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">Pair</span>&lt;T <span class="directive">extends</span> Employee&gt;{
  <span class="directive">private</span> T first;
  <span class="directive">private</span> T second;
  Pair(T first,
       T second)
   {<span class="local-variable">this</span>.first = first;
    <span class="local-variable">this</span>.second = second;}
  T getFirst()
   {<span class="keyword">return</span> first; }
  T getSecond()
   {<span class="keyword">return</span> second; }
  <span class="type">void</span> setFirst(T newValue)
   {first = newValue;}
  <span class="type">void</span> setSecond(T newValue)
   {second = newValue;}
}</code></pre></div></td><td class="tableblock halign-left valign-top"><div><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">Pair</span> {
  <span class="directive">private</span> Employee first;
  <span class="directive">private</span> Employee second;
  Pair(Employee first,
       Employee second)
   {<span class="local-variable">this</span>.first = first;
    <span class="local-variable">this</span>.second = second;}
  Employee getFirst()
   {<span class="keyword">return</span> first; }
  Employee getSecond()
   {<span class="keyword">return</span> second; }
  <span class="type">void</span> setFirst(Employee newValue)
   {first = newValue;}
  <span class="type">void</span> setSecond(Employee newValue)
   {second = newValue;}
}</code></pre></div></td></tr></table></section>
<section id="_вызовы_методов"><h2>Вызовы методов</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%" /><col style="width:50%" /></colgroup><tbody><tr><td class="tableblock halign-center valign-top"><div><div class="paragraph"><p><strong>Source code</strong></p></div></div></td><td class="tableblock halign-center valign-top"><div><div class="paragraph"><p><strong>Compiled</strong></p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div><pre class="CodeRay listingblock"><code class="java language-java">Pair&lt;Manager&gt; buddies =
  <span class="keyword">new</span> Pair&lt;&gt;();

<span class="comment">/*контроль типов --
на этапе компиляции*/</span>
buddies.setFirst(cfo);
buddies.setSecond(cto);

<span class="comment">/*type cast не нужен*/</span>
Manager buddy =
  buddies.getFirst();</code></pre></div></td><td class="tableblock halign-left valign-top"><div><pre class="CodeRay listingblock"><code class="java language-java">Pair buddies =
  <span class="keyword">new</span> Pair();

<span class="comment">/*контроль типов не нужен --
на этапе компиляции проверили!*/</span>
buddies.setFirst(cfo);
buddies.setSecond(cto);

<span class="comment">/*type cast вставлен компилятором*/</span>
Manager buddy =
  (Manager) buddies.getFirst();</code></pre></div></td></tr></table></section>
<section id="_bridge_methods_для_сохранения_полиморфизма"><h2>Bridge methods для сохранения полиморфизма</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%" /><col style="width:50%" /></colgroup><tbody><tr><td class="tableblock halign-center valign-top"><div><div class="paragraph"><p><strong>Source code</strong></p></div></div></td><td class="tableblock halign-center valign-top"><div><div class="paragraph"><p><strong>Compiled</strong></p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">DateInterval</span> <span class="directive">extends</span>
 Pair&lt;LocalDate&gt; {

 <span class="annotation">@Override</span>
 <span class="type">void</span> setSecond(
        LocalDate second){
  <span class="keyword">if</span> (second
   .compareTo(getFirst())&gt;=<span class="integer">0</span>){
      <span class="local-variable">super</span>.setSecond(second);
  }
 }
}</code></pre></div></td><td class="tableblock halign-left valign-top"><div><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">DateInterval</span> <span class="directive">extends</span> Pair {

 <span class="type">void</span> setSecond(
        LocalDate second){
  <span class="keyword">if</span> (second
   .compareTo(getFirst())&gt;=<span class="integer">0</span>){
      <span class="local-variable">super</span>.setSecond(second);
  }
 }

 <span class="comment">//bridge method!!</span>
 <span class="annotation">@Override</span>
 <span class="type">void</span> setSecond(<span class="predefined-type">Object</span> second){
   setSecond((LocalDate) second);
 }
}</code></pre></div></td></tr></table></section>
<section id="_итог_как_это_работает"><h2>Итог: как это работает</h2><div class="ulist"><ul><li><p>Параметризованных классов в JVM нет, только обычные классы и методы.</p></li><li><p>Типовые параметры заменяются на Object или на свою границу.</p></li><li><p>Для сохранения полиморфизма добавляются связывающие методы (bridge methods).</p></li><li><p>Сведение типов добавляется по мере необходимости.</p></li></ul></div></section>
<section id="_никогда_не_употребляйте_сырые_типы"><h2>Никогда не употребляйте сырые типы</h2><div class="ulist"><ul><li><p>Возможность назначать переменным сырые типы оставлена для обратной совместимости с кодом, написанным до Java5.</p></li><li><p>Java5 вышла в 2004 году.</p></li></ul></div>
<pre class="CodeRay listingblock"><code class="java language-java"><span class="predefined-type">List</span>&lt;Manager&gt; a = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();
<span class="comment">//Употребили сырой тип.</span>
<span class="predefined-type">List</span> b = a;
<span class="comment">//Компилируется и выполняется, список испорчен!</span>
b.add(<span class="string"><span class="delimiter">&quot;</span><span class="content">manager</span><span class="delimiter">&quot;</span></span>);
<span class="comment">//Выполняется: list.get вернул String как Object</span>
<span class="predefined-type">System</span>.out.println(b.get(<span class="integer">0</span>));
<span class="comment">//ClassCastException при выполнении</span>
Manager m = a.get(<span class="integer">0</span>);</code></pre></section>
<section id="_понимание_дженериков_в_джаве"><div class="paragraph"><p><em>Понимание дженериков в Джаве&#8201;&#8212;&#8201;это не про то, что с ними делать можно, а про то, что с ними делать нельзя.</em></p></div></section>
<section id="_стирание_типов_невозможность_определить_параметр_типа_в_runtime"><h2>Стирание типов &#8594; невозможность определить параметр типа в Runtime</h2><div class="imageblock" style=""><img src="images/rawtype.png" alt="rawtype" /></div>
<pre class="CodeRay listingblock"><code class="java language-java"><span class="comment">//ошибка компиляции! не знаем мы в рантайме параметр типа!</span>
<span class="keyword">if</span> (a <span class="keyword">instanceof</span> Pair&lt;<span class="predefined-type">String</span>&gt;) ...

<span class="comment">//вот так -- получится...</span>
if (a <span class="keyword">instanceof</span> Pair&lt;?&gt;) ...</code></pre></section>
<section id="_стирание_типов_до_object_невозможность_использовать_примитивные_типы_в_качестве_параметров"><h2>Стирание типов до Object &#8594; невозможность использовать примитивные типы в качестве параметров</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="comment">//увы, невозможно!</span>
<span class="predefined-type">List</span>&lt;<span class="type">int</span>&gt;  integers = ... <span class="comment">//ошибка компиляции!</span>

List&lt;<span class="predefined-type">Integer</span>&gt; integers = ...
integers.add(<span class="integer">42</span>); <span class="comment">/*под капотом будет autoboxing:
integers.add(Integer.valueOf(42);*/</span>
<span class="type">int</span> v = integers.get(<span class="integer">0</span>); <span class="comment">/*под капотом будет
unboxing: v = integers.get(0).intValue();*/</span></code></pre>
<div class="paragraph"><p>Нужна производительность? Пишем специальные реализации.</p></div></section>
<section id="_нельзя_инстанцировать_типы_параметры"><h2>Нельзя инстанцировать типы-параметры</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">Pair</span>&lt;T&gt; {

    T newValue {
      <span class="keyword">return</span> <span class="keyword">new</span> T(); <span class="comment">//увы, ошибка компиляции!</span>
    }
}</code></pre></section>
<section id="_решается_с_помощью_метакласса_и_рефлексии_о_которой_речь_впереди"><h2>Решается с помощью метакласса и рефлексии (о которой речь впереди)</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">Container</span>&lt;T&gt; {
  <span class="comment">//bounded wildcard type, речь впереди</span>
  <span class="predefined-type">Class</span>&lt;? <span class="directive">extends</span> T&gt; clazz;

  <span class="predefined-type">Container</span>(<span class="predefined-type">Class</span>&lt;? <span class="directive">extends</span> T&gt; clazz) {
    <span class="local-variable">this</span>.clazz = clazz;
  }

  T newInstance() <span class="directive">throws</span> ReflectiveOperationException {
   <span class="comment">//если нашёлся открытый конструктор без параметров!</span>
    <span class="keyword">return</span> clazz.newInstance();
  }
}

<span class="predefined-type">Container</span>&lt;Employee&gt; container1 = <span class="keyword">new</span> <span class="predefined-type">Container</span>&lt;&gt;(Employee.class);</code></pre></section>
<section id="_тем_более_нельзя_инстанцировать_массив_типа_параметра"><h2>Тем более нельзя инстанцировать массив типа-параметра</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="directive">public</span> T<span class="type">[]</span> toArray(){
    <span class="comment">//Не скомпилируется</span>
    <span class="keyword">return</span> <span class="keyword">new</span> T[size];
}</code></pre>
<div class="paragraph"><p>Решается передачей параметра, например, в ArrayList:</p></div>
<pre class="CodeRay listingblock"><code class="java language-java"><span class="comment">/* Если массив достаточных размеров -- используе м его,
если недостаточных -- конструируем новый через рефлексию*/</span>
<span class="directive">public</span> &lt;T&gt; T<span class="type">[]</span> toArray(T<span class="type">[]</span> a)</code></pre></section>
<section id="_массивы_и_дженерикилютые_враги"><h2>Массивы и дженерики&#8201;&#8212;&#8201;лютые враги</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="comment">//Не скомпилируется: Generic Array Creation.</span>
<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;<span class="type">[]</span> a = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;<span class="predefined-type">String</span>&gt;[<span class="integer">10</span>];
<span class="comment">//...ведь такой массив не будет иметь</span>
<span class="comment">//полную информацию о своих элементах!</span></code></pre></section>
<section id="_забьём_значения_кувалдой_и_устроим_heap_pollution"><h2>Забьём значения кувалдой и устроим heap pollution</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;<span class="type">[]</span> a = (<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;<span class="type">[]</span>)<span class="keyword">new</span> <span class="predefined-type">List</span>&lt;?&gt;[<span class="integer">10</span>];
<span class="predefined-type">Object</span><span class="type">[]</span> objArray = a;

objArray[<span class="integer">0</span>] = (<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;) <span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>);
<span class="comment">//a[1] не пропустит в compile-time</span>
<span class="comment">//но objArray[1] пропустит и в compile-time, и в run-time</span>
objArray[<span class="integer">1</span>] = (<span class="predefined-type">List</span>&lt;Manager&gt;) <span class="predefined-type">Arrays</span>.asList(<span class="keyword">new</span> Manager());


<span class="comment">//Runtime error: Manager cannot be cast to String</span>
<span class="predefined-type">String</span> s = a[<span class="integer">1</span>].get(<span class="integer">0</span>);
<span class="comment">//...это и называется heap pollution.</span></code></pre></section>
<section id="_varargsвсё_равно_массив"><h2>Varargs&#8201;&#8212;&#8201;всё равно массив&#8230;&#8203;</h2><div class="paragraph"><p>Тот же heap pollution, что и в прошлом примере:</p></div>
<pre class="CodeRay listingblock"><code class="java language-java"><span class="directive">static</span> <span class="type">void</span> dangerous(<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;... stringLists){
  <span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt; intList = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;<span class="predefined-type">Integer</span>&gt;() {{add(<span class="integer">42</span>);}};
  <span class="predefined-type">Object</span><span class="type">[]</span> objects = stringLists;
  objects[<span class="integer">0</span>] = intList;
  <span class="comment">//ClassCastException</span>
  <span class="predefined-type">String</span> s = stringLists[<span class="integer">0</span>].get(<span class="integer">0</span>);
}

dangerous(<span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;());</code></pre></section>
<section id="_компилятор_что_то_предчувствует"><h2>Компилятор что-то предчувствует&#8230;&#8203;</h2><div class="imageblock" style=""><img src="images/varargswarning.png" alt="varargswarning" width="100%" /></div>
<div class="paragraph"><p>Чтобы успокоить компилятор, надо поставить аннотацию <code>@SafeVarargs</code>:</p></div>
<pre class="CodeRay listingblock"><code class="java language-java"><span class="comment">/*Я даю честное слово, что не буду
устраивать heap pollution!*/</span>
<span class="annotation">@SafeVarargs</span>
<span class="directive">static</span> <span class="type">void</span> dangerous(<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;...</code></pre>
<div class="paragraph"><p>&#8230;&#8203;и компилятор успокоится.</p></div></section>
<section id="_зачем"><h2>Зачем?!</h2><div class="ulist"><ul><li><p>Всё потому, что иметь varargs с параметризованными типами удобно!..</p><div class="ulist"><ul><li><p><code>Arrays.asList(T&#8230;&#8203; a)</code></p></li><li><p><code>Collections.addAll(Collection&lt;? super T&gt; c, T&#8230;&#8203; elements)</code></p></li><li><p><code>EnumSet.of(E first, E&#8230;&#8203; rest)</code></p></li></ul></div></li><li><p>Если вести себя хорошо, можно ставить @SafeVarargs, и всё будет хорошо:</p><div class="ulist"><ul><li><p>Не записывать ничего в элементы массива,</p></li><li><p>Не раздавать ссылку на массив параметров наружу.</p></li></ul></div></li></ul></div></section>
<section id="_нельзя_параметризовать"><h2>Нельзя параметризовать</h2><div class="ulist"><ul><li><p>Исключения</p><div class="ulist"><ul><li><p>ловля исключений&#8201;&#8212;&#8201;это проверка их типов,</p></li><li><p>дальше сырых типов мы в рантайме проверить не можем.</p></li></ul></div></li><li><p>Анонимные классы</p><div class="ulist"><ul><li><p>Инстанцируется по месту, не может быть несколько классов, параметризованных по-разному.</p></li></ul></div></li><li><p>Enum-ы.</p></li></ul></div></section>
<section id="_параметры_типов_нельзя_использовать_в_статическом_контексте"><h2>Параметры типов нельзя использовать в статическом контексте</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">Container</span>&lt;T&gt; {
    <span class="directive">private</span> <span class="directive">static</span> T value; <span class="comment">//не скомпилируется.</span>
    <span class="directive">public</span> <span class="directive">static</span> T getValue(); <span class="comment">//не скомпилируется</span>
}

<span class="comment">//Статический контекст ОДИН НА ВСЕХ</span>
<span class="predefined-type">Container</span>&lt;Foo&gt;.getValue();
<span class="predefined-type">Container</span>&lt;Bar&gt;.getValue();</code></pre></section>
<section id="_нельзя_реализовывать_разные_параметризации_одного_и_того_же_интерфейса"><h2>Нельзя реализовывать разные параметризации одного и того же интерфейса</h2><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%" /><col style="width:50%" /></colgroup><tbody><tr><td class="tableblock halign-center valign-top"><div><div class="paragraph"><p><strong>Source code</strong></p></div></div></td><td class="tableblock halign-center valign-top"><div><div class="paragraph"><p><strong>Compiled</strong></p></div></div></td></tr><tr><td class="tableblock halign-left valign-top"><div><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">Employee</span> <span class="directive">implements</span>
  <span class="predefined-type">Comparable</span>&lt;Employee&gt;{
  <span class="annotation">@Override</span>
  <span class="type">int</span> compareTo(Employee e){
    ...
  }
}
<span class="type">class</span> <span class="class">Manager</span>
  <span class="directive">extends</span> Employee
  <span class="directive">implements</span>
  <span class="predefined-type">Comparable</span>&lt;Manager&gt; {
  <span class="annotation">@Override</span>
  <span class="type">int</span> compareTo(Manager m){
    ...
  }
}</code></pre></div></td><td class="tableblock halign-left valign-top"><div><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">Manager</span>
  <span class="directive">extends</span> Employee
  <span class="directive">implements</span> <span class="predefined-type">Comparable</span>{

  <span class="comment">//bridge method for Employee</span>
  <span class="type">int</span> compareTo(<span class="predefined-type">Object</span> m) {
    <span class="keyword">return</span> compareTo((Manager) m);
  }

  <span class="comment">//bridge method for Manager</span>
  <span class="type">int</span> compareTo(<span class="predefined-type">Object</span> e) {
    <span class="keyword">return</span> compareTo((Employee) e);
  }

  <span class="comment">//CLASH!!!</span>
}</code></pre></div></td></tr></table></section>
<section id="_ковариантность_массивов_vs_инвариантность_дженериков"><h2>Ковариантность массивов vs инвариантность дженериков</h2><div class="imageblock" style=""><img src="images/manemp.png" alt="manemp" /></div>
<table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%" /><col style="width:50%" /></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><div><div class="imageblock" style=""><img src="images/covariance.png" alt="covariance" /></div>
<pre class="CodeRay listingblock"><code class="java language-java">Manager<span class="type">[]</span> managers = ...
Employee lowlyEmployee = ...
Employee<span class="type">[]</span> e = managers;
<span class="comment">/*ArrayStoreException in runtime*/</span>
e[<span class="integer">0</span>] = lowlyEmployee;</code></pre></div></td><td class="tableblock halign-left valign-top"><div><div class="imageblock" style=""><img src="images/invariance.png" alt="invariance" /></div>
<pre class="CodeRay listingblock"><code class="java language-java"><span class="predefined-type">List</span>&lt;Manager&gt; managers = ...
Employee lowlyEmployee = ...
<span class="comment">/*Тупо не скомпилируется*/</span>
List&lt;Employee&gt; e = managers;</code></pre></div></td></tr></table></section>
<section id="_реальная_картина"><h2>Реальная картина</h2><div class="imageblock" style=""><img src="images/realpicture.png" alt="realpicture" /></div></section>
<section id="_как_быть_если_хочется_такого"><h2>Как быть, если хочется такого?</h2><div class="imageblock" style=""><img src="images/manempperson.png" alt="manempperson" /></div>
<pre class="CodeRay listingblock"><code class="java language-java"><span class="predefined-type">List</span>&lt;Manager&gt; managers = ...
List&lt;Employee&gt; employees = ...

<span class="comment">//Допустимые варианты, хотим чтоб компилировалось!</span>
employees.addAllFrom(managers);
managers.addAllTo(employees);

<span class="comment">//Недопустимые варианты, не хотим чтоб компилировалось!</span>
managers.addAllFrom(employees);
employees.addAllTo(managers);</code></pre></section>
<section id="_так_не_получится"><h2>Так не получится&#8230;&#8203;</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="comment">//можно переносить только одинаково типизированные списки</span>
<span class="type">class</span> <span class="class">List</span>&lt;E&gt; {
    <span class="type">void</span> addAllFrom (<span class="predefined-type">List</span>&lt;E&gt; list){
       <span class="keyword">for</span> (<span class="error">Е</span> item: list)
         add(item);
    }

    <span class="type">void</span> addAllTo (<span class="predefined-type">List</span>&lt;E&gt; list){
       <span class="keyword">for</span> (E item: <span class="local-variable">this</span>)
         list.add(item);
    }
}</code></pre></section>
<section id="_wildcard_types"><h2>Wildcard Types</h2><div class="imageblock" style=""><img src="images/wildext.png" alt="wildext" /></div>
<pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">List</span>&lt;E&gt; {
    <span class="comment">//для List&lt;Employee&gt; &quot;пролезет&quot; List&lt;Manager&gt;!!</span>
    <span class="type">void</span> addAllFrom (<span class="predefined-type">List</span>&lt;? <span class="directive">extends</span> E&gt; list){
       <span class="keyword">for</span> (<span class="error">Е</span> item: list)
         add(item);
    }
}</code></pre></section>
<section id="_что_можно_сделать_с_объектом_типизированным_extends"><h2>Что можно сделать с объектом, типизированным <code>? extends</code>?</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="predefined-type">List</span>&lt;? <span class="directive">extends</span> E&gt; list = ...

<span class="comment">//это понятно</span>
E e1 = list.get(...);

E e2 = ...;
<span class="comment">//не скомпилируется! ПОЧЕМУ??</span>
list.add(e2);
<span class="comment">//скомпилируется. ПОЧЕМУ??</span>
list.add(<span class="predefined-constant">null</span>);</code></pre>
<div class="paragraph"><p>В общем, <code>addAllTo</code> реализовать не получится&#8230;&#8203;</p></div></section>
<section id="_в_обратную_сторону_контравариантные_типы"><h2>В обратную сторону (контравариантные типы)</h2><div class="imageblock" style=""><img src="images/wildsup.png" alt="wildsup" /></div>
<pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">List</span>&lt;E&gt; {
    <span class="comment">//для List&lt;Employee&gt; &quot;пролезет&quot; List&lt;Person&gt;!!</span>
    <span class="type">void</span> addAllTo (<span class="predefined-type">List</span>&lt;? <span class="local-variable">super</span> E&gt; list){
       <span class="keyword">for</span> (<span class="error">Е</span> item: <span class="local-variable">this</span>)
         list.add(item);
    }
}</code></pre></section>
<section id="_что_можно_сделать_с_объектом_типизированным_super"><h2>Что можно сделать с объектом, типизированным <code>? super</code>?</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="predefined-type">List</span>&lt;? <span class="local-variable">super</span> E&gt; list = ...

E e1 = ...;
<span class="comment">//скомпилируется!</span>
list.add(e1);
list.add(<span class="predefined-constant">null</span>);

<span class="comment">//Только Object. ПОЧЕМУ??</span>
<span class="predefined-type">Object</span> e2 = list.get(...);</code></pre></section>
<section id="_unbounded_wildcard"><h2>Unbounded wildcard</h2><div class="ulist"><ul><li><p><code>List&lt;?&gt;</code>&#8201;&#8212;&#8201;это то же, что <code>List&lt;? extends Object&gt;</code>. (Вопрос: почему не <code>&lt;? super Object&gt;</code>?)</p></li><li><p>Брать элементы можем, но тип только <code>Object</code>.</p></li><li><p>Класть можем только null.</p></li></ul></div></section>
<section id="_мнемоническое_правило"><h2>Мнемоническое правило</h2><div class="paragraph"><p><strong>PECS</strong></p></div>
<div class="paragraph"><p><strong>Producer Extends, Consumer Super</strong></p></div>
<pre class="CodeRay listingblock"><code class="java language-java"><span class="directive">public</span> <span class="directive">static</span> &lt;T&gt; max (<span class="predefined-type">Collection</span>&lt;? <span class="directive">extends</span> T&gt; coll,
                       <span class="predefined-type">Comparator</span>&lt;? <span class="local-variable">super</span> T&gt; comp)

<span class="predefined-type">Collections</span>.max(<span class="predefined-type">List</span>&lt;<span class="predefined-type">Integer</span>&gt;, <span class="predefined-type">Comparator</span>&lt;<span class="predefined-type">Number</span>&gt;)

<span class="predefined-type">Collections</span>.max(<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;, <span class="predefined-type">Comparator</span>&lt;<span class="predefined-type">Object</span>&gt;)</code></pre></section>
<section id="_правила_использования_wildcard_типов"><h2>Правила использования wildcard-типов</h2><div class="ulist"><ul><li><p>Используются в аргументах методов и локальных переменных.</p></li><li><p>Невидимы пользователю API, не должны возвращаться.</p></li><li><p>Их цель&#8201;&#8212;&#8201;принимать те аргументы, которые надо принимать, и отвергать те аргументы, которые надо отвергать.</p></li><li><p>Должны быть используемы в API, иначе API будет слишком "жёстким" и непригодным для использования.</p></li></ul></div></section>
<section id="_wildcard_capture"><h2>Wildcard Capture</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> swap(Pair&lt;?&gt; p) {
  <span class="predefined-type">Object</span> f = p.getFirst();
  <span class="predefined-type">Object</span> s = p.getSecond();
  <span class="comment">//УУУППС!!</span>
  <span class="comment">// (мы знаем, что они правильного типа,</span>
  <span class="comment">//  но ничего не можем поделать)</span>
  p.setFirst(...);
  p.setSecond(...);
}</code></pre></section>
<section id="_метод_с_type_capture"><h2>Метод с type capture</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> swap(Pair&lt;?&gt; p) {
  <span class="keyword">return</span> swapHelper(p);
}

<span class="directive">private</span> <span class="directive">static</span> &lt;T&gt; <span class="type">void</span> swapHelper(Pair&lt;T&gt; p) {
  T f = p.getFirst();
  p.setFirst(p.getSecond());
  p.setSecond(f);
}</code></pre></section>
<section id="_recursive_generics"><h2>Recursive Generics</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">Holder</span>&lt;E, SELF <span class="directive">extends</span> Holder&lt;E, SELF&gt;&gt;{
    E value;
    SELF setValue(E value){
        <span class="local-variable">this</span>.value = value;
        <span class="keyword">return</span> (SELF) <span class="local-variable">this</span>;
    }
}

<span class="type">class</span> <span class="class">StringHolder</span> <span class="directive">extends</span> Holder&lt;<span class="predefined-type">String</span>, StringHolder&gt; {
    <span class="type">void</span> doSmth() {...};
}

StringHolder h = <span class="keyword">new</span> StringHolder().setValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">aaa</span><span class="delimiter">&quot;</span></span>).doSmth();</code></pre></section>
<section id="_что_почитать_посмотреть"><h2>Что почитать-посмотреть</h2><div class="ulist"><ul><li><p>Полезное</p><div class="ulist"><ul><li><p>J. Bloch, Effective Java, 3rd ed. Chapter 5&#8201;&#8212;&#8201;Generics. Addison-Wesley, 2018</p></li><li><p><a href="https://www.youtube.com/watch?v=_0c9Fd9FacU">Александр Маторин — Неочевидные Дженерики. JPoint 2016</a></p></li></ul></div></li><li><p>Дичь</p><div class="ulist"><ul><li><p><a href="https://dev.to/rosstate/java-is-unsound-the-industry-perspective">Ross Tate. Java is Unsound: The Industry Perspective</a> (2017-01-24).</p></li><li><p><a href="https://habr.com/ru/post/330724/">Иван Бессонов. Тьюринг-полнота Generic типов Java</a> (2017-08-24, на базе публикации от ноября 2016).</p></li></ul></div></li></ul></div></section>
<section id="_nada_amin_rose_tates_example"><h2>Nada Amin &amp; Rose Tate&#8217;s example</h2><pre class="CodeRay listingblock"><code class="java language-java"><span class="type">class</span> <span class="class">Unsound</span> {
  <span class="directive">static</span> <span class="type">class</span> <span class="class">Constrain</span>&lt;A, B <span class="directive">extends</span> A&gt; {}
  <span class="directive">static</span> <span class="type">class</span> <span class="class">Bind</span>&lt;A&gt; {
    &lt;B <span class="directive">extends</span> A&gt;
    A upcast(Constrain&lt;A,B&gt; constrain, B b) {
      <span class="keyword">return</span> b;
    }
  }
  <span class="directive">static</span> &lt;T,U&gt; U coerce(T t) {
    Constrain&lt;U,? <span class="local-variable">super</span> T&gt; constrain = <span class="predefined-constant">null</span>;
    Bind&lt;U&gt; bind = <span class="keyword">new</span> Bind&lt;U&gt;();
    <span class="keyword">return</span> bind.upcast(constrain, t);
  }
  <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
    <span class="predefined-type">String</span> zero = Unsound.&lt;<span class="predefined-type">Integer</span>,<span class="predefined-type">String</span>&gt;coerce(<span class="integer">0</span>);
  }
}</code></pre></section>
<section id="_radu_grigores_example"><h2>Radu Grigore&#8217;s Example</h2><pre class="CodeRay listingblock"><code class="java language-java">BadList&lt;? <span class="local-variable">super</span> <span class="predefined-type">String</span>&gt; badList = <span class="predefined-constant">null</span>;
<span class="predefined-type">List</span>&lt;? <span class="local-variable">super</span> BadList&lt;? <span class="local-variable">super</span> <span class="predefined-type">String</span>&gt;&gt; list = badList;</code></pre></section></div></div><script src="reveal.js-3.7.0/lib/js/head.min.js"></script><script src="reveal.js-3.7.0/js/reveal.js"></script><script>Array.prototype.slice.call(document.querySelectorAll('.slides section')).forEach(function(slide) {
  if (slide.getAttribute('data-background-color')) return;
  // user needs to explicitly say he wants CSS color to override otherwise we might break custom css or theme (#226)
  if (!(slide.classList.contains('canvas') || slide.classList.contains('background'))) return;
  var bgColor = getComputedStyle(slide).backgroundColor;
  if (bgColor !== 'rgba(0, 0, 0, 0)' && bgColor !== 'transparent') {
    slide.setAttribute('data-background-color', bgColor);
    slide.style.backgroundColor = 'transparent';
  }
})

// See https://github.com/hakimel/reveal.js#configuration for a full list of configuration options
Reveal.initialize({
  // Display presentation control arrows
  controls: true,
  // Help the user learn the controls by providing hints, for example by
  // bouncing the down arrow when they first encounter a vertical slide
  controlsTutorial: true,
  // Determines where controls appear, "edges" or "bottom-right"
  controlsLayout: 'bottom-right',
  // Visibility rule for backwards navigation arrows; "faded", "hidden"
  // or "visible"
  controlsBackArrows: 'faded',
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: true,
  // Control which views the slide number displays on
  showSlideNumber: 'all',
  // Push each slide change to the browser history
  history: true,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Vertical centering of slides
  center: false,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // Randomizes the order of slides each time the presentation loads
  shuffle: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags whether to include the current fragment in the URL,
  // so that reloading brings you to the same fragment position
  fragmentInURL: false,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Flags if we should show a help overlay when the questionmark
  // key is pressed
  help: true,
  // Flags if speaker notes should be visible to all viewers
  showNotes: false,
  // Global override for autolaying embedded media (video/audio/iframe)
  // - null: Media will only autoplay if data-autoplay is present
  // - true: All media will autoplay, regardless of individual setting
  // - false: No media will autoplay, regardless of individual setting
  autoPlayMedia: null,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Use this method for navigation when auto-sliding
  autoSlideMethod: Reveal.navigateNext,
  // Specify the average time in seconds that you think you will spend
  // presenting each slide. This is used to show a pacing timer in the
  // speaker view
  defaultTiming: 120,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  // Add `data-preview-link` and `data-preview-link="false"` to customise each link
  // individually
  previewLinks: false,
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: 'none',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',
  // Number of pixels to move the parallax background per slide
  // - Calculated automatically unless specified
  // - Set to 0 to disable movement along an axis
  parallaxBackgroundHorizontal: null,
  parallaxBackgroundVertical: null,
  // The display mode that will be used to show slides
  display: 'block',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 1600,
  height: 900,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'reveal.js-3.7.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
      
      { src: 'reveal.js-3.7.0/plugin/zoom-js/zoom.js', async: true },
      { src: 'reveal.js-3.7.0/plugin/notes/notes.js', async: true },
      
      
      
      
  ],

  

});</script></body></html>